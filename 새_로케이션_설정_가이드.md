# ìƒˆ ë¡œì¼€ì´ì…˜ ì„¤ì • ê°€ì´ë“œ

ì´ ê°€ì´ë“œëŠ” ê¸°ì¡´ WP1 ì‹œìŠ¤í…œì„ ìƒˆë¡œìš´ ë¡œì¼€ì´ì…˜(ì˜ˆ: WP2)ìœ¼ë¡œ ë³µì œí•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤.

## ğŸ“‹ ì‘ì—… ìˆœì„œ

### 1ë‹¨ê³„: ìƒˆ í´ë” ìƒì„± ë° íŒŒì¼ ë³µì‚¬

1. **ìƒˆ í´ë” ìƒì„±**
   ```powershell
   # WP1 í´ë”ì™€ ê°™ì€ ë ˆë²¨ì— WP2 í´ë” ìƒì„±
   cd c:\Users\LHA-M
   xcopy WP1 WP2 /E /I /H
   ```

2. **í´ë”ëª… í™•ì¸**
   - ìƒˆ í´ë”ëª…: `WP2` (ë˜ëŠ” ì›í•˜ëŠ” ì´ë¦„)
   - ì ‘ë‘ì‚¬: `wp2_` (í…Œì´ë¸”ëª…ì— ì‚¬ìš©)

### 2ë‹¨ê³„: Supabase í…Œì´ë¸” ìƒì„±

**ì¤‘ìš”**: ê°™ì€ Supabase ê³„ì •ì„ ì‚¬ìš©í•˜ì§€ë§Œ, í…Œì´ë¸”ì€ ì™„ì „íˆ ë¶„ë¦¬ë©ë‹ˆë‹¤.

#### 2-1. SQL ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ìˆœì„œ

Supabase SQL Editorì—ì„œ ë‹¤ìŒ ìˆœì„œë¡œ ì‹¤í–‰:

1. **ê¸°ë³¸ í…Œì´ë¸” ìƒì„±** (ì ‘ë‘ì‚¬ ì—†ìŒ - ê³µí†µ)
   - `receiving_plan`
   - `receiving_items`
   - `receiving_log`
   - `shipping_instruction`
   - `shipping_instruction_items`
   - `flagged_containers`

2. **ë¡œì¼€ì´ì…˜ë³„ í…Œì´ë¸” ìƒì„±** (wp2_ ì ‘ë‘ì‚¬)
   - `wp2_locations`
   - `wp2_delivery_locations`

#### 2-2. SQL ìŠ¤í¬ë¦½íŠ¸ ìˆ˜ì •

`admin/sql/` í´ë”ì˜ SQL íŒŒì¼ë“¤ì„ ìƒˆ ì ‘ë‘ì‚¬ë¡œ ìˆ˜ì •:

- `create_locations_table.sql`: `wp1_` â†’ `wp2_`
- `create_delivery_locations_table.sql`: `wp1_` â†’ `wp2_`
- `add_delivery_location_to_shipping_instruction.sql`: `wp1_delivery_locations` â†’ `wp2_delivery_locations`

### 3ë‹¨ê³„: JavaScript íŒŒì¼ ìˆ˜ì •

ë‹¤ìŒ íŒŒì¼ë“¤ì—ì„œ í…Œì´ë¸”ëª… ì ‘ë‘ì‚¬ë¥¼ ë³€ê²½:

#### 3-1. ìœ„ì¹˜ ê´€ë ¨ í…Œì´ë¸” (wp1_ â†’ wp2_)

**íŒŒì¼ ëª©ë¡:**
- `admin/js/location_editor.js`
- `admin/js/location_master.js`
- `admin/js/location_view.js`
- `admin/js/receiving.js`
- `admin/js/migrate_locations.js`

**ë³€ê²½í•  í…Œì´ë¸”ëª…:**
- `wp1_locations` â†’ `wp2_locations`
- `wp1_delivery_locations` â†’ `wp2_delivery_locations`

#### 3-2. ê²€ìƒ‰ ë° ë³€ê²½ ë°©ë²•

ê° íŒŒì¼ì—ì„œ ë‹¤ìŒì„ ê²€ìƒ‰í•˜ì—¬ ë³€ê²½:
```javascript
// ì°¾ê¸°
.from('wp1_locations')
.from('wp1_delivery_locations')

// ë³€ê²½
.from('wp2_locations')
.from('wp2_delivery_locations')
```

### 4ë‹¨ê³„: ì„¤ì • íŒŒì¼ í™•ì¸

**ë³€ê²½ ë¶ˆí•„ìš”**: `config/config.js`ì™€ `admin/config/config.js`ëŠ” ê°™ì€ Supabase ê³„ì •ì„ ì‚¬ìš©í•˜ë¯€ë¡œ ë³€ê²½í•  í•„ìš” ì—†ìŠµë‹ˆë‹¤.

### 5ë‹¨ê³„: í…ŒìŠ¤íŠ¸

1. ìƒˆ í´ë”ì—ì„œ `index.html` ì—´ê¸°
2. ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸
3. ìœ„ì¹˜ ë§ˆìŠ¤í„° ê´€ë¦¬ì—ì„œ ìƒˆ í…Œì´ë¸” ì—°ê²° í™•ì¸
4. ì…ê³ /ì¶œê³  ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸

## ğŸ”§ ìë™í™” ìŠ¤í¬ë¦½íŠ¸

ì•„ë˜ PowerShell ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ìë™ìœ¼ë¡œ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```powershell
# WP2_ë§ˆì´ê·¸ë ˆì´ì…˜.ps1
$sourceDir = "c:\Users\LHA-M\WP1"
$targetDir = "c:\Users\LHA-M\WP2"
$oldPrefix = "wp1_"
$newPrefix = "wp2_"

# 1. í´ë” ë³µì‚¬
Write-Host "í´ë” ë³µì‚¬ ì¤‘..." -ForegroundColor Yellow
Copy-Item -Path $sourceDir -Destination $targetDir -Recurse -Force

# 2. JavaScript íŒŒì¼ì—ì„œ í…Œì´ë¸”ëª… ë³€ê²½
Write-Host "JavaScript íŒŒì¼ ìˆ˜ì • ì¤‘..." -ForegroundColor Yellow
$jsFiles = Get-ChildItem -Path $targetDir -Filter "*.js" -Recurse
foreach ($file in $jsFiles) {
    $content = Get-Content $file.FullName -Raw -Encoding UTF8
    $content = $content -replace "wp1_locations", "wp2_locations"
    $content = $content -replace "wp1_delivery_locations", "wp2_delivery_locations"
    Set-Content -Path $file.FullName -Value $content -Encoding UTF8 -NoNewline
}

# 3. SQL íŒŒì¼ì—ì„œ í…Œì´ë¸”ëª… ë³€ê²½
Write-Host "SQL íŒŒì¼ ìˆ˜ì • ì¤‘..." -ForegroundColor Yellow
$sqlFiles = Get-ChildItem -Path $targetDir -Filter "*.sql" -Recurse
foreach ($file in $sqlFiles) {
    $content = Get-Content $file.FullName -Raw -Encoding UTF8
    $content = $content -replace "wp1_locations", "wp2_locations"
    $content = $content -replace "wp1_delivery_locations", "wp2_delivery_locations"
    Set-Content -Path $file.FullName -Value $content -Encoding UTF8 -NoNewline
}

Write-Host "ì™„ë£Œ!" -ForegroundColor Green
```

## ğŸ“ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] ìƒˆ í´ë” ìƒì„± (WP2)
- [ ] íŒŒì¼ ë³µì‚¬ ì™„ë£Œ
- [ ] SQL ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ì ‘ë‘ì‚¬ ë³€ê²½ (wp1_ â†’ wp2_)
- [ ] JavaScript íŒŒì¼ì—ì„œ í…Œì´ë¸”ëª… ë³€ê²½
- [ ] Supabaseì—ì„œ ìƒˆ í…Œì´ë¸” ìƒì„±
- [ ] ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸
- [ ] ìœ„ì¹˜ ë§ˆìŠ¤í„° ê´€ë¦¬ í…ŒìŠ¤íŠ¸
- [ ] ì…ê³ /ì¶œê³  ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸

## âš ï¸ ì£¼ì˜ì‚¬í•­

1. **ë°ì´í„° ë¶„ë¦¬**: WP1ê³¼ WP2ëŠ” ì™„ì „íˆ ë³„ë„ì˜ ë°ì´í„°ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
2. **ê³µí†µ í…Œì´ë¸”**: `receiving_plan`, `shipping_instruction` ë“±ì€ ì ‘ë‘ì‚¬ê°€ ì—†ì§€ë§Œ, ë¡œì¼€ì´ì…˜ë³„ë¡œ êµ¬ë¶„í•˜ë ¤ë©´ ì»¬ëŸ¼ ì¶”ê°€ê°€ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
3. **ë°±ì—…**: ì‘ì—… ì „ì— ê¸°ì¡´ ë°ì´í„°ë¥¼ ë°±ì—…í•˜ì„¸ìš”.

## ğŸ”„ í–¥í›„ í™•ì¥

ì—¬ëŸ¬ ë¡œì¼€ì´ì…˜ì„ ê´€ë¦¬í•˜ë ¤ë©´:
- ê° ë¡œì¼€ì´ì…˜ë³„ë¡œ ë³„ë„ í´ë” ìœ ì§€
- ë˜ëŠ” ë‹¨ì¼ ì‹œìŠ¤í…œì—ì„œ ë¡œì¼€ì´ì…˜ ì„ íƒ ê¸°ëŠ¥ ì¶”ê°€ (ê³ ê¸‰)
